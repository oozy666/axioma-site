const translations = {
    en: {
        "title": "Mailer by Axioma",
        "lead": "Mailer by Axioma is a Telegram-based application that helps users automate email outreach by sending emails directly from their own Google accounts.",
        "app_desc": "The application is designed for individual users such as music producers, beatmakers, and other creators who need a simple way to manage and send email campaigns.",
        "auth_desc": "Mailer by Axioma uses Google OAuth 2.0 and the Gmail API. Emails are sent strictly on behalf of the authenticated user and only after explicit user authorization.",
        "key_features": "Key Features",
        "feature_1": "Send emails from your own Gmail account",
        "feature_2": "No access to incoming emails",
        "feature_3": "No reading or analysis of private messages",
        "feature_4": "Recipient lists are processed temporarily and never stored",
        "privacy_title": "Privacy",
        "privacy_text": "User privacy and data security are a top priority. For detailed information about how data is accessed, used, and protected, please review our Privacy Policy.",
        "privacy_link": "Privacy Policy",
        "contact_title": "Contact",
        "contact_text": "If you have any questions about the application or data usage, you can contact us at:",
        "footer_rights": "2026 Mailer by Axioma. All rights reserved.",
        "legal_title": "Legal Documentation",
        "legal_text": "For more information on how we handle your data and the terms of using our service, please review the documents below.",
        "privacy_link": "Privacy Policy",
        "service_link": "Terms of Service",

        "back_home": "Back to Home",
        "policy_title": "Privacy Policy",
        "service_title": "Terms of Service",
        "last_updated": "Last updated: January 2026",
        "policy_intro": "This Privacy Policy describes how Mailer by Axioma (\"the Application\") accesses, uses, stores, and protects user data.",

        "tos_intro": "Welcome to Mailer by Axioma (\"Service\", \"Application\")! These Terms of Service (\"Terms\") govern your use of our Telegram bot, which provides email automation tools through your own Google account (\"Services\"). Please read them carefully.",
        "tos_acceptance": "By using our Service, you confirm that you have read, understood, and unconditionally accepted these Terms. If you do not agree with any of these terms, you are not permitted to use the Service.",
        "tos_1_title": "1. Description of Services",
        "tos_1_text": "Mailer by Axioma is a tool that allows users to send emails from their Google accounts using the Gmail API and Google Drive API to access recipient lists provided by the user.",
        "tos_2_title": "2. User Responsibility",
        "tos_2_text": "You are fully and exclusively responsible for:",
        "tos_2_l1": "Content of your mailings: The legality, accuracy, and ethics of all content you send using our Service.",
        "tos_2_l2": "Recipient lists: You confirm that you have all necessary permissions and consents from recipients to send them emails.",
        "tos_2_l3": "Legal compliance: You are required to comply with all applicable local and international anti-spam and data protection laws (including but not limited to CAN-SPAM, GDPR, etc.).",
        "tos_3_title": "3. Acceptable Use Policy",
        "tos_3_text": "You agree not to use the Service to create, store, or send any content that:",
        "tos_3_l1": "Is spam, unsolicited commercial mail, or phishing.",
        "tos_3_l2": "Is fraudulent, misleading, or deceptive.",
        "tos_3_l3": "Contains malware, viruses, Trojans, or any other harmful code.",
        "tos_3_l4": "Is illegal, defamatory, discriminatory, or offensive.",
        "tos_3_l5": "Promotes hatred, violence, or discrimination based on race, religion, gender, age, sexual orientation, or nationality.",
        "tos_3_l6": "Contains pornographic or explicitly sexual materials.",
        "tos_3_l7": "Violates intellectual property rights (copyright, trademarks) of third parties.",
        "tos_3_l8": "Offends the feelings of individuals or social groups.",
        "tos_3_toggle_show": "Show policy list",
        "tos_3_toggle_hide": "Hide policy list",
        "tos_4_title": "4. Termination of Access (Blocking)",
        "tos_4_text": "We reserve the right to immediately suspend or completely terminate your access to the Service without prior notice at our sole discretion if we believe that you:",
        "tos_4_l1": "Violated any provision of these Terms.",
        "tos_4_l2": "Used the Service to send prohibited content as specified in Section 3.",
        "tos_4_l3": "Exhibited disrespectful or hostile behavior toward support or other users of the Service.",
        "tos_4_l4": "Engaged in any activity that, in our sole opinion, harms the Service, its reputation, or its users.",
        "tos_4_note": "Please note that non-payment of a subscription is not grounds for blocking. In the event of subscription expiration, access to paid features will be automatically limited until renewal.",
        "tos_5_title": "5. Limitation of Liability and Disclaimer of Warranties",
        "tos_5_text": "The Service is provided \"as is\" and \"as available,\" without any express or implied warranties. We do not guarantee that:",
        "tos_5_l1": "The Service will operate uninterrupted, securely, or be available at any particular time or location.",
        "tos_5_l2": "Any errors or defects will be corrected.",
        "tos_5_l3": "Delivery of your emails will be successful or timely.",
        "tos_5_limit": "To the maximum extent permitted by law, Mailer by Axioma, its developers, and owners shall under no circumstances be liable for any indirect, incidental, special, or punitive damages, including but not limited to loss of data, loss of profit, business interruption, or other intangible damage resulting from the use or inability to use the Service.",
        "tos_6_title": "6. Changes to Terms",
        "tos_6_text": "We reserve the right to modify or replace these Terms at any time at our discretion. In the event of material changes, we will notify you via a message in the Telegram bot. By continuing to use the Service after such changes take effect, you agree to the revised terms.",
        "tos_7_title": "7. Dispute Resolution",
        "tos_7_text": "Any disputes arising out of these Terms or in connection with the use of the Service will be resolved through negotiations. If an agreement is not reached, the parties may turn to the appropriate authorities to resolve the dispute in accordance with accepted norms of international law.",
        "tos_8_title": "8. Contact Information",
        "tos_8_text": "If you have any questions regarding these Terms, please contact us at:",

        "section_1_title": "1. Application Overview",
        "section_1_text": "Mailer by Axioma is a Telegram-based email automation tool that allows users to send emails from their own Google accounts using the Gmail API.",
        "section_2_title": "2. Google User Data Accessed",
        "section_2_text": "The Application accesses the following Google user data via Google OAuth 2.0:",
        "gmail_api_desc": "Used solely to send emails on behalf of the authenticated user. The Application does not read, access, or analyze incoming emails, attachments, or mailbox contents.",
        "drive_api_desc": "Used only to access a spreadsheet file explicitly provided by the user, containing email recipient addresses for an email campaign. The Application does not access or analyze any other files on the user's Google Drive.",
        "section_3_title": "3. Data Provided Directly by the User",
        "user_id_text": "Telegram user ID and username",
        "campaign_content_text": "<strong>Email campaign content</strong> (subject and message body)",
        "recipient_list_text": "<strong>Email recipient list</strong> (provided via a Google Spreadsheet)",
        "section_4_title": "4. How Data Is Used",
        "section_4_intro": "User data is used exclusively to provide the core functionality of the Application, which is sending email campaigns on behalf of the user.",
        "use_1": "Email content is used to send messages via the Gmail API",
        "use_2": "Recipient lists are processed temporarily to complete a mailing campaign",
        "use_3": "Email campaign history (subject and message body) is stored to allow users to review previous campaigns",
        "section_5_title": "5. Data Storage and Security",
        "section_5_text": "OAuth access and refresh tokens are stored securely in an encrypted form using industry-standard encryption methods. Encryption keys are stored separately using environment variables.",
        "temp_processing_title": "Temporary Processing",
        "temp_processing_text": "Email recipient lists are downloaded temporarily to the server only for the duration of an active mailing process and are permanently deleted immediately after the campaign is completed.",
        "secure_storage_title": "Secure Storage",
        "secure_storage_text": "Email campaign history (email subject and message body) is stored in a secure database and remains stored until user data is removed.",
        "section_6_title": "6. Data Sharing",
        "section_6_text": "The Application does not sell, rent, or share Google user data with third parties. Data is used strictly to provide the Application's functionality.",
        "section_7_title": "7. Data Retention and Deletion",
        "section_7_text": "OAuth tokens remain stored until the user revokes access to the Application. Users can revoke access at any time through their Google Account permissions page:",
        "retention_note": "Once access is revoked, the stored OAuth tokens become invalid and can no longer be used to access Google services.",
        "section_8_title": "8. User Control",
        "section_8_text": "Users have full control over their Google account permissions and can revoke the Application's access at any time through Google Account settings.",
        "section_9_title": "9. Contact Information",
        "section_9_text": "If you have any questions about this Privacy Policy or data usage, please contact:",
        "app_name_label": "Application Name",
        "app_name_value": "Mailer by Axioma"
    },
    ru: {
        "title": "Mailer от Axioma",
        "lead": "Mailer от Axioma — это приложение на базе Telegram, которое помогает автоматизировать email-рассылки, отправляя письма напрямую с вашего Google-аккаунта.",
        "app_desc": "Приложение разработано для частных пользователей, таких как музыкальные продюсеры, битмейкеры и другие авторы, которым нужен простой способ создания и управления email-рассылками.",
        "auth_desc": "Mailer от Axioma использует Google OAuth 2.0 и Gmail API. Письма отправляются строго от имени авторизованного пользователя и только после его явного разрешения.",
        "key_features": "Ключевые особенности",
        "feature_1": "Отправка писем с вашего личного Gmail-аккаунта",
        "feature_2": "Нет доступа к входящим письмам",
        "feature_3": "Приватные сообщения не читаются и не анализируются",
        "feature_4": "Списки получателей обрабатываются временно и никогда не сохраняются",
        "privacy_title": "Конфиденциальность",
        "privacy_text": "Конфиденциальность пользователей и безопасность данных — наш приоритет. Для получения подробной информации о том, как мы получаем, используем и защищаем данные, ознакомьтесь с нашей Политикой конфиденциальности.",
        "privacy_link": "Политика конфиденциальности",
        "contact_title": "Контакты",
        "contact_text": "Если у вас возникли вопросы о приложении или использовании данных, вы можете связаться с нами:",
        "footer_rights": "2026 Mailer от Axioma. Все права защищены.",
        "legal_title": "Юридическая информация",
        "legal_text": "Для получения дополнительной информации о том, как мы обрабатываем ваши данные и на каких условиях предоставляем услуги, ознакомьтесь с документами ниже.",
        "privacy_link": "Политика конфиденциальности",
        "service_link": "Условия использования",

        "back_home": "На главную",
        "policy_title": "Политика конфиденциальности",
        "service_title": "Условия использования",
        "last_updated": "Последнее обновление: Январь 2026",
        "policy_intro": "Настоящая Политика конфиденциальности описывает, как Mailer от Axioma («Приложение») получает доступ, использует, хранит и защищает данные пользователей.",

        "tos_intro": "Добро пожаловать в Mailer by Axioma (далее \"Сервис\", \"Приложение\")! Настоящие Условия предоставления услуг (\"Условия\") регулируют использование вами нашего Telegram-бота, который предоставляет инструменты для автоматизации email-рассылок через ваш собственный Google-аккаунт (\"Услуги\"). Пожалуйста, внимательно прочтите их.",
        "tos_acceptance": "Используя наш Сервис, вы подтверждаете, что прочитали, поняли и безоговорочно приняли настоящие Условия. Если вы не согласны с какими-либо из этих условий, вы не имеете права использовать Сервис.",
        "tos_1_title": "1. Описание Услуг",
        "tos_1_text": "Mailer by Axioma — это инструмент, который позволяет пользователям отправлять электронные письма со своих Google-аккаунтов, используя Gmail API и Google Drive API для доступа к спискам получателей, предоставленным пользователем.",
        "tos_2_title": "2. Ответственность пользователя",
        "tos_2_text": "Вы несете полную и исключительную ответственность за:",
        "tos_2_l1": "Содержимое ваших рассылок: Законность, точность и этичность всего контента, который вы отправляете с помощью нашего Сервиса.",
        "tos_2_l2": "Списки получателей: Вы подтверждаете, что у вас есть все необходимые разрешения и согласия от получателей для отправки им электронных писем.",
        "tos_2_l3": "Соблюдение законодательства: Вы обязаны соблюдать все применимые местные и международные законы о борьбе со спамом и защите данных (включая, но не ограничиваясь, CAN-SPAM, GDPR и др.).",
        "tos_3_title": "3. Политика допустимого использования",
        "tos_3_text": "Вы соглашаетесь не использовать Сервис для создания, хранения или отправки любого контента, который:",
        "tos_3_l1": "Является спамом, нежелательной коммерческой почтой или фишингом.",
        "tos_3_l2": "Является мошенническим, вводящим в заблуждение или обманчивым.",
        "tos_3_l3": "Содержит вредоносное ПО, вирусы, трояны или любой другой вредоносный код.",
        "tos_3_l4": "Является незаконным, клеветническим, дискриминационным или оскорбительным.",
        "tos_3_l5": "Пропагандирует ненависть, насилие или дискриминацию по признаку расы, религии, пола, возраста, сексуальной ориентации или национальности.",
        "tos_3_l6": "Содержит материалы порнографического или откровенно сексуального характера.",
        "tos_3_l7": "Нарушает права интеллектуальной собственности (авторские права, товарные знаки) третьих лиц.",
        "tos_3_l8": "Оскорбляет чувства отдельных лиц или социальных групп.",
        "tos_3_toggle_show": "Показать список",
        "tos_3_toggle_hide": "Скрыть список",
        "tos_4_title": "4. Прекращение доступа (Блокировка)",
        "tos_4_text": "Мы оставляем за собой право немедленно приостановить или полностью прекратить ваш доступ к Сервису без предварительного уведомления по нашему собственному усмотрению, если мы сочтем, что вы:",
        "tos_4_l1": "Нарушили любое из положений настоящих Условий.",
        "tos_4_l2": "Использовали Сервис для отправки запрещенного контента, указанного в п. 3.",
        "tos_4_l3": "Проявляли неуважительное или враждебное поведение по отношению к поддержке или другим пользователям Сервиса.",
        "tos_4_l4": "Участвовали в любой деятельности, которая, по нашему единоличному мнению, наносит вред Сервису, его репутации или его пользователям.",
        "tos_4_note": "Обратите внимание, что неуплата за подписку не является основанием для блокировки. В случае окончания срока действия подписки доступ к платным функциям будет автоматически ограничен до ее продления.",
        "tos_5_title": "5. Ограничение ответственности и отказ от гарантий",
        "tos_5_text": "Сервис предоставляется на условиях \"как есть\" (\"as is\") и \"по мере доступности\" (\"as available\"), без каких-либо явных или подразумеваемых гарантий. Мы не гарантируем, что:",
        "tos_5_l1": "Сервис будет работать бесперебойно, безопасно или будет доступен в любое конкретное время или в любом месте.",
        "tos_5_l2": "Любые ошибки или дефекты будут исправлены.",
        "tos_5_l3": "Доставка ваших писем будет успешной или своевременной.",
        "tos_5_limit": "В максимальной степени, разрешенной законом, Mailer by Axioma, его разработчики и владельцы ни при каких обстоятельствах не несут ответственности за любые косвенные, случайные, специальные или штрафные убытки, включая, но не ограничиваясь, потерю данных, упущенную выгоду, сбои в работе или другой нематериальный ущерб, возникший в результате использования или невозможности использования Сервиса.",
        "tos_6_title": "6. Изменение Условий",
        "tos_6_text": "Мы оставляем за собой право изменять или заменять настоящие Условия в любое время по нашему усмотрению. В случае внесения существенных изменений мы уведомим вас посредством сообщения в Telegram-боте. Продолжая использовать Сервис после вступления в силу таких изменений, вы соглашаетесь с пересмотренными условиями.",
        "tos_7_title": "7. Разрешение споров",
        "tos_7_text": "Любые споры, возникающие из настоящих Условий или в связи с использованием Сервиса, будут решаться путем переговоров. Если соглашение не будет достигнуто, стороны могут обратиться в соответствующие инстанции для разрешения спора в соответствии с общепринятыми нормами международного права.",
        "tos_8_title": "8. Контактная информация",
        "tos_8_text": "Если у вас есть какие-либо вопросы относительно настоящих Условий, пожалуйста, свяжитесь с нами по адресу:",
        "section_1_title": "1. Обзор приложения",
        "section_1_text": "Mailer от Axioma — это инструмент автоматизации электронной почты на базе Telegram, который позволяет пользователям отправлять письма со своих учетных записей Google, используя Gmail API.",
        "section_2_title": "2. Доступ к данным пользователя Google",
        "section_2_text": "Приложение получает доступ к следующим данным пользователя Google через Google OAuth 2.0:",
        "gmail_api_desc": "Используется исключительно для отправки писем от имени авторизованного пользователя. Приложение не читает, не получает доступ и не анализирует входящие письма, вложения или содержимое почтового ящика.",
        "drive_api_desc": "Используется только для доступа к таблице, явно предоставленной пользователем, которая содержит адреса получателей для email-рассылки. Приложение не получает доступ и не анализирует другие файлы на Google Диске пользователя.",
        "section_3_title": "3. Данные, предоставляемые пользователем напрямую",
        "user_id_text": "Telegram user ID и имя пользователя",
        "campaign_content_text": "<strong>Содержание email-рассылки</strong> (тема и текст сообщения)",
        "recipient_list_text": "<strong>Список получателей</strong> (предоставляется через Google Таблицу)",
        "section_4_title": "4. Как используются данные",
        "section_4_intro": "Данные пользователя используются исключительно для обеспечения основной функциональности Приложения — отправки email-рассылок от имени пользователя.",
        "use_1": "Содержимое писем используется для отправки сообщений через Gmail API",
        "use_2": "Списки получателей обрабатываются временно для завершения рассылки",
        "use_3": "История рассылок (тема и текст) сохраняется, чтобы пользователи могли просматривать свои предыдущие кампании",
        "section_5_title": "5. Хранение и безопасность данных",
        "section_5_text": "Токены доступа и обновления OAuth хранятся в зашифрованном виде с использованием стандартных методов шифрования. Ключи шифрования хранятся отдельно в переменных окружения.",
        "temp_processing_title": "Временная обработка",
        "temp_processing_text": "Списки получателей загружаются на сервер временно только на период активной рассылки и безвозвратно удаляются сразу после завершения кампании.",
        "secure_storage_title": "Безопасное хранение",
        "secure_storage_text": "История рассылок (тема и текст письма) хранится в защищенной базе данных и остается там до тех пор, пока данные пользователя не будут удалены.",
        "section_6_title": "6. Передача данных",
        "section_6_text": "Приложение не продает, не сдает в аренду и не передает данные пользователей Google третьим лицам. Данные используются строго для обеспечения функциональности Приложения.",
        "section_7_title": "7. Хранение и удаление данных",
        "section_7_text": "OAuth-токены хранятся до тех пор, пока пользователь не отзовет доступ к Приложению. Пользователи могут отозвать доступ в любое время на странице разрешений Google Аккаунта:",
        "retention_note": "Как только доступ отозван, сохраненные OAuth-токены становятся недействительными и больше не могут использоваться для доступа к сервисам Google.",
        "section_8_title": "8. Контроль пользователя",
        "section_8_text": "Пользователи имеют полный контроль над разрешениями своего аккаунта Google и могут отозвать доступ Приложения в любое время через настройки Google Аккаунта.",
        "section_9_title": "9. Контактная информация",
        "section_9_text": "Если у вас есть вопросы по поводу этой Политики конфиденциальности или использования данных, пожалуйста, свяжитесь с нами:",
        "app_name_label": "Название приложения",
        "app_name_value": "Mailer от Axioma"
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Inject Styles for Switcher
    const style = document.createElement('style');
    style.textContent = `
        .language-switcher {
            position: absolute;
            top: 2rem;
            right: 2rem;
            z-index: 1000;
            cursor: pointer;
            font-family: var(--font-primary, sans-serif);
            font-weight: 700;
            font-size: 1rem;
            color: var(--color-primary, #000);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            user-select: none;
            padding: 0.5rem;
            transition: opacity 0.2s;
            display: inline-flex;
            align-items: center;
            line-height: 1;
        }
        .language-switcher:hover {
            opacity: 0.7;
        }
        
        /* Mobile adjustment */
        @media (max-width: 768px) {
            .language-switcher {
                top: 1.5rem;
                right: 1.5rem;
            }
        }
    `;
    document.head.appendChild(style);

    let currentLang;

    // Helper to set lang
    const setLanguage = (lang) => {
        currentLang = lang;
        localStorage.setItem('language', lang);
        document.documentElement.lang = lang;

        // Update Text
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang][key]) {
                el.innerHTML = translations[lang][key];
            }
        });

        // Update Switcher Text
        const switcher = document.querySelector('.language-switcher');
        if (switcher) {
            switcher.textContent = lang === 'en' ? 'ENG' : 'RUS';
        }
    };

    // Create and Insert Switcher
    const createAndInsertSwitcher = () => {
        const btn = document.createElement('div');
        btn.className = 'language-switcher';
        btn.textContent = currentLang === 'en' ? 'ENG' : 'RUS';
        btn.onclick = (e) => {
            e.stopPropagation();
            const newLang = currentLang === 'en' ? 'ru' : 'en';
            setLanguage(newLang);
        };
        document.body.appendChild(btn);
    };

    // Init: Use the language set by init.js or default to 'en'
    currentLang = document.documentElement.lang || 'en';

    // Ensure switcher and texts are correct
    createAndInsertSwitcher();
    setLanguage(currentLang);

    // Remove loading state once translations are applied
    document.documentElement.classList.remove('lang-loading');

    // Foldable Toggle Text Logic
    document.querySelectorAll('.foldable-toggle').forEach(toggle => {
        toggle.addEventListener('click', () => {
            const container = toggle.closest('.foldable-container');
            const isFolded = !container.classList.contains('foldable-active');
            const textSpan = toggle.querySelector('[data-i18n]');
            if (textSpan) {
                const key = isFolded ? 'tos_3_toggle_hide' : 'tos_3_toggle_show';
                textSpan.setAttribute('data-i18n', key);
                textSpan.innerHTML = translations[currentLang][key];
            }
        });
    });
});
